<h2>Customers</h2>

<div class="filter-container">
  <label for="filterInput">Filter:</label>
  <input type="text" id="filterInput" [(ngModel)]="filterText" (input) = "filterCustomers()" placeholder="Enter a keyword">
  
  <button class="new-customer-button" (click)="openNewCustomerPopup()">New Customer</button>
  <button class="viewOrders" (click)="viewOrders(selectedCustomer)">View Orders</button>
  
</div>
<br>
<table class="customer-table">
  <thead>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Address</th>
      <th>City</th>
      <th>State</th>
      <th>Order Total</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let customer of filteredCustomers">
      <td>{{ customer.firstName }}</td>
      <td>{{ customer.lastName }}</td>
      <td>{{ customer.address }}</td>
      <td>{{ customer.city }}</td>
      <td>{{ customer.state }}</td>
      <td>{{ customer.orderTotal }}</td>
      <td><button (click)="openEditCustomerPopup(customer)">Edit</button></td>
      <td><button (click)="deleteCustomer(customer)">Delete</button></td>
    </tr>
  </tbody>
</table>

<!-- New Customer Popup -->
<div class="popup-container" *ngIf="showNewCustomerPopup">
  <div class="popup-content">
    <h3>New Customer</h3>
    <div class="form-group">
      <label for="firstName">First Name:</label>
      <input type="text" id="firstName" [(ngModel)]="newCustomer.firstName" placeholder="Enter first name">
    </div>
    <div class="form-group">
      <label for="lastName">Last Name:</label>
      <input type="text" id="lastName" [(ngModel)]="newCustomer.lastName" placeholder="Enter last name">
    </div>
    <div class="form-group">
      <label for="address">Address:</label>
      <input type="text" id="address" [(ngModel)]="newCustomer.address" placeholder="Enter address">
    </div>
    <div class="form-group">
      <label for="city">City:</label>
      <input type="text" id="city" [(ngModel)]="newCustomer.city" placeholder="Enter city">
    </div>
    <div class="form-group">
      <label for="state">State:</label>
      <input type="text" id="state" [(ngModel)]="newCustomer.state" placeholder="Enter state">
    </div>
    <div class="button-group">
      <button class="cancel-button" (click)="closeNewCustomerPopup()">Cancel</button>
      <button class="insert-button" (click)="insertNewCustomer()">Insert</button>
    </div>
  </div>
</div>

<!-- Edit Customer Popup -->
<div class="popup-container" *ngIf="showEditCustomerPopup">
  <div class="popup-content">
    <h3>Edit Customer</h3>
    <div class="form-group">
      <label for="firstName">First Name:</label>
      <input type="text" id="firstName" [(ngModel)]="selectedCustomer.firstName" placeholder="Enter first name">
    </div>
    <div class="form-group">
      <label for="lastName">Last Name:</label>
      <input type="text" id="lastName" [(ngModel)]="selectedCustomer.lastName" placeholder="Enter last name">
    </div>
    <div class="form-group">
      <label for="address">Address:</label>
      <input type="text" id="address" [(ngModel)]="selectedCustomer.address" placeholder="Enter address">
    </div>
    <div class="form-group">
      <label for="city">City:</label>
      <input type="text" id="city" [(ngModel)]="selectedCustomer.city" placeholder="Enter city">
    </div>
    <div class="form-group">
      <label for="state">State:</label>
      <input type="text" id="state" [(ngModel)]="selectedCustomer.state" placeholder="Enter state">
    </div>
    <div class="button-group">
      <button class="cancel-button" (click)="closeEditCustomerPopup()">Cancel</button>
      <button class="update-button" (click)="updateCustomer()">Update</button>
    </div>
  </div>
</div>